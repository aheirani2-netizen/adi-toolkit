<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADI Reflective Log</title>

<!-- Keep your original jsPDF + html2canvas if you still want the automated button -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body { 
    font-family: Arial, sans-serif; 
    padding: 20px; 
    max-width: 900px; 
    margin: auto; 
    background: #f4f4f4; 
}
h1 { text-align: center; margin-bottom: 20px; }
input, textarea, select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
    box-sizing: border-box;
}
textarea { 
    min-height: 100px; 
    resize: vertical; 
}
button {
    width: 100%;
    padding: 14px;
    margin: 12px 0;
    border: none;
    border-radius: 10px;
    font-size: 17px;
    font-weight: bold;
    cursor: pointer;
    color: white;
}
button#bestPdfPhone { 
    background: linear-gradient(#ff6b6b, #ee5253); 
    font-size: 18px; 
}
button#generatePdf { background: #0066cc; }
button#emailPdf    { background: #2e7d32; }
button#exportHistory { background: #d32f2f; }
.scale-bar {
    display: flex;
    margin-bottom: 20px;
    gap: 4px;
}
.scale-bar div {
    flex: 1;
    padding: 10px;
    text-align: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border-radius: 6px;
}
.scale-bar div:nth-child(-n+3) { background: #d32f2f; }
.scale-bar div:nth-child(n+4):nth-child(-n+6) { background: #fbc02d; color: black; }
.scale-bar div:nth-child(n+7) { background: #2e7d32; }
.selected { outline: 4px solid #000; box-shadow: 0 0 8px rgba(0,0,0,0.4); }
.pupil-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}
.pupil-bar select { flex: 3; }
.pupil-bar button { flex: 1; }
.total-hours { 
    font-weight: bold; 
    font-size: 1.2em; 
    margin: 15px 0; 
    text-align: center; 
}
.instructions {
    background: #fff;
    padding: 16px;
    border-radius: 10px;
    border: 1px solid #ddd;
    margin: 16px 0;
    line-height: 1.5;
}
.hidden { display: none; }
</style>
</head>

<body>

<div id="formArea">

<h1>LEARNER REFLECTIVE LOG</h1>
<p><strong>Instructor:</strong> Alex Heirani</p>
<p><strong>Date:</strong> <span id="date"></span></p>

<div class="pupil-bar">
    <select id="pupilSelect"></select>
    <button onclick="addPupil()">Add Pupil</button>
    <button onclick="deletePupil()">Delete</button>
</div>

<p class="total-hours">Total Hours: <span id="totalHours">0</span></p>

<div class="section-label">Lesson Duration (hours)</div>
<input type="number" step="0.25" id="lessonHours" min="0" value="2">

<div class="section-label">Lesson Goal</div>
<textarea id="goal"></textarea>

<div class="section-label">Initial Self Rating (1–10)</div>
<div class="scale-bar" id="scale1"></div>

<div class="section-label">What went well?</div>
<textarea id="well"></textarea>

<div class="section-label">What didn’t go well? / What could you do differently?</div>
<textarea id="improve"></textarea>

<div class="section-label">Did you achieve the goal? / Reflections</div>
<textarea id="achieved"></textarea>

<div class="section-label">Final Self Rating (1–10)</div>
<div class="scale-bar" id="scale2"></div>

<div class="section-label">Additional Comments</div>
<textarea id="comments"></textarea>

<!-- New prominent button for mobile-friendly perfect PDF -->
<button id="bestPdfPhone">Best PDF on Phone – Looks Like Screen!</button>

<div id="phoneInstructions" class="instructions hidden">
    <h3>Quick steps to get perfect PDF (looks exactly like this page)</h3>
    <p><strong>iPhone (Safari):</strong></p>
    <ol>
        <li>Scroll to top of page</li>
        <li>Tap <strong>Share</strong> icon (square ↑)</li>
        <li>Scroll & tap <strong>Print</strong></li>
        <li>Pinch out on preview to see full page</li>
        <li>Tap <strong>Share</strong> icon again → <strong>Save to Files</strong> or <strong>Mail</strong></li>
    </ol>

    <p><strong>Android (Chrome):</strong></p>
    <ol>
        <li>Tap three dots ⋮ (top right)</li>
        <li>Tap <strong>Share</strong> → <strong>Print</strong></li>
        <li>Choose <strong>Save as PDF</strong></li>
        <li>Tap PDF icon or Save button</li>
        <li>Choose folder → Save</li>
    </ol>

    <p>→ Then open email app and attach the saved PDF.</p>
    <p><em>This gives the sharpest, most accurate result on phone.</em></p>
    <button onclick="document.getElementById('phoneInstructions').classList.add('hidden')">Close instructions</button>
</div>

<!-- Optional: keep old buttons if you want -->
<div style="margin-top: 30px;">
    <button id="generatePdf">Old: Generate PDF (may look flatter)</button>
    <button id="emailPdf">Old: Generate & Email (may look flatter)</button>
    <button id="exportHistory">Export Full Progress</button>
</div>

</div>

<script>
// Your existing script logic here (pupils, loadDropdown, addPupil, etc.) ...
// I'll include only the new parts + minimal skeleton

document.getElementById("date").innerText = 
    new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });

// ... (keep your pupils, save, loadDropdown, addPupil, deletePupil, updateDisplay, createScale, saveLessonData functions)

createScale("scale1");
createScale("scale2");

// New button handler – show instructions
document.getElementById("bestPdfPhone").onclick = function() {
    document.getElementById("phoneInstructions").classList.remove("hidden");
    window.scrollTo(0, 0); // help user see top of page
};

// Optional: attempt to trigger print dialog (works partially on some mobile browsers)
function tryOpenPrint() {
    if (window.matchMedia('print').matches) return; // already printing
    window.print(); // may open print dialog on some devices
}

// You can call tryOpenPrint() from the button if you want to experiment:
// document.getElementById("bestPdfPhone").onclick = function() {
//     document.getElementById("phoneInstructions").classList.remove("hidden");
//     tryOpenPrint();
// };

// Keep your old generateLessonPDF / exportHistoryPDF if desired ...
// (or remove them to simplify the page)

loadDropdown();
</script>

</body>
</html>