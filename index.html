<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADI Reflective Log</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 900px;
    margin: auto;
    background: #f4f4f4;
    transition: 0.3s;
}

h1 {
    text-align: center;
    letter-spacing: 1px;
}

input, textarea, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
}

textarea { min-height: 80px; }

.scale-bar {
    display: flex;
    margin-bottom: 15px;
}

.scale-bar div {
    flex: 1;
    padding: 8px;
    text-align: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

.scale-bar div:nth-child(-n+3) { background: #d32f2f; }
.scale-bar div:nth-child(n+4):nth-child(-n+6) { background: #fbc02d; color:black; }
.scale-bar div:nth-child(n+7) { background: #2e7d32; }

.selected { outline: 3px solid black; }

button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    cursor: pointer;
}

.dark {
    background: #1c1c1e;
    color: white;
}

.dark input, .dark textarea, .dark select {
    background: #2c2c2e;
    color: white;
    border: 1px solid #444;
}

.about-box {
    background: #e0e0e0;
    padding: 15px;
    border-radius: 10px;
    margin-top: 20px;
    font-size: 14px;
}

.dark .about-box {
    background: #2c2c2e;
}
</style>
</head>

<body>

<h1>LEARNER REFLECTIVE LOG</h1>

<p><strong>Instructor:</strong> Alex Heirani</p>
<p><strong>Date:</strong> <span id="date"></span></p>

<label>Learner Name:</label>
<input type="text" id="name">

<label>Lesson goal agreed with learner:</label>
<textarea id="goal"></textarea>

<label>Initial self-rating (1–10):</label>
<div class="scale-bar" id="scale1"></div>

<label>What didn’t go well? How can you improve?</label>
<textarea id="improve"></textarea>

<label>What could you do differently next time?</label>
<textarea id="different"></textarea>

<label>What did you do well?</label>
<textarea id="well"></textarea>

<label>Did you achieve the lesson goal today?</label>
<textarea id="achieved"></textarea>

<label>Final self-rating (1–10):</label>
<div class="scale-bar" id="scale2"></div>

<label>Additional Comments:</label>
<textarea id="comments"></textarea>

<label>Any safety critical incidents?</label>
<select id="safety">
<option>No</option>
<option>Yes</option>
</select>

<label>If yes – what happened?</label>
<textarea id="incident"></textarea>

<label>Instructor view – was the goal achieved?</label>
<textarea id="goalAchieved"></textarea>

<label>Instructor Notes:</label>
<textarea id="notes"></textarea>

<button onclick="generatePDF()">Generate Professional PDF</button>
<button onclick="sendEmail()">Send Email (Summary)</button>
<button onclick="emailWithPDF()">Email with PDF Attached</button>
<button onclick="toggleDark()">Toggle Dark Mode</button>

<div class="about-box">
<strong>About This Tool</strong><br><br>
This reflective log tool is designed for ADI lesson structure and Part 3 standards check preparation.
It supports client-centred learning, structured reflection, and professional documentation.
<br><br>
Instructor: Alex Heirani
</div>

<script>
document.getElementById("date").innerText =
new Date().toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});

function createScale(id){
for(let i=1;i<=10;i++){
let div=document.createElement("div");
div.innerText=i;
div.onclick=function(){
[...this.parentElement.children].forEach(c=>c.classList.remove("selected"));
this.classList.add("selected");
this.parentElement.setAttribute("data-value",i);
};
document.getElementById(id).appendChild(div);
}
}
createScale("scale1");
createScale("scale2");

function getScale(id){
return document.getElementById(id).getAttribute("data-value")||"";
}

function buildReport(){
return `
LEARNER REFLECTIVE LOG

Instructor: Alex Heirani
Date: ${document.getElementById("date").innerText}
Learner: ${name.value}

Lesson Goal:
${goal.value}

Initial Rating: ${getScale("scale1")}/10

What didn’t go well:
${improve.value}

What to do differently:
${different.value}

What went well:
${well.value}

Goal Achieved:
${achieved.value}

Final Rating: ${getScale("scale2")}/10

Additional Comments:
${comments.value}

Safety Incident: ${safety.value}
Details:
${incident.value}

Instructor View:
${goalAchieved.value}

Notes:
${notes.value}
`;
}

function generatePDF(){
const { jsPDF } = window.jspdf;
const doc = new jsPDF();
doc.setFontSize(12);
doc.text(doc.splitTextToSize(buildReport(),180),15,20);
doc.save("Learner_Reflective_Log.pdf");
}

function sendEmail(){
let subject = `Lesson Reflection – ${name.value}`;
let body = buildReport();
window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}

function emailWithPDF(){
generatePDF();
setTimeout(function(){
let subject = `Lesson Reflection – ${name.value}`;
let body = "Please find attached your lesson reflection PDF.\n\nInstructor: Alex Heirani";
window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
},800);
}

function toggleDark(){
document.body.classList.toggle("dark");
}
</script>

</body>
</html>
