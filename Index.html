<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Learner Reflective Log</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 900px;
    margin: auto;
    background: #f5f5f5;
    transition: 0.3s;
}

h1 {
    text-align: center;
    letter-spacing: 1px;
}

input, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
}

.section {
    margin-bottom: 20px;
}

.scale-bar {
    display: flex;
}

.scale-bar div {
    flex: 1;
    padding: 8px;
    text-align: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

.scale-bar div:nth-child(-n+3) { background: #d32f2f; }
.scale-bar div:nth-child(n+4):nth-child(-n+6) { background: #fbc02d; color:black;}
.scale-bar div:nth-child(n+7) { background: #2e7d32; }

.selected {
    outline: 3px solid black;
}

button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    cursor: pointer;
}

.dark {
    background: #1c1c1e;
    color: white;
}

.dark input, .dark textarea {
    background: #2c2c2e;
    color: white;
    border: 1px solid #444;
}
</style>
</head>

<body>

<h1>LEARNER REFLECTIVE LOG</h1>

<p><strong>Instructor:</strong> Alex Heirani</p>
<p><strong>Date:</strong> <span id="date"></span></p>

<label>Name:</label>
<input type="text" id="name">

<label>Lesson goal to be agreed with learner:</label>
<textarea id="goal"></textarea>

<label>How would you scale yourself on today's lesson goal?</label>
<div class="scale-bar" id="scale1"></div>

<label>What do you think didn’t go well, how can you look to improve?</label>
<textarea id="improve" placeholder="What went wrong? What caused it? How can I fix it?"></textarea>

<label>What could you do differently next time to make it better:</label>
<textarea id="different"></textarea>

<label>What did you do well today:</label>
<textarea id="well"></textarea>

<label>Do you feel that you achieved what was set out on the lesson goal today?</label>
<textarea id="achieved"></textarea>

<label>How would I scale myself now after today's lesson?</label>
<div class="scale-bar" id="scale2"></div>

<label>Additional Comments:</label>
<textarea id="comments"></textarea>

<label>Was there any safety critical incidents?</label>
<select id="safety">
<option>No</option>
<option>Yes</option>
</select>

<label>If YES – What happened?</label>
<textarea id="incident"></textarea>

<label>Do I think the goal set was achieved today by the learner?</label>
<textarea id="goalAchieved"></textarea>

<label>Notes:</label>
<textarea id="notes"></textarea>

<button onclick="generatePDF()">Generate Professional PDF</button>
<button onclick="toggleDark()">Toggle Dark Mode</button>

<script>
document.getElementById("date").innerText =
new Date().toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});

function createScale(id){
for(let i=1;i<=10;i++){
let div=document.createElement("div");
div.innerText=i;
div.onclick=function(){
[...this.parentElement.children].forEach(c=>c.classList.remove("selected"));
this.classList.add("selected");
this.parentElement.setAttribute("data-value",i);
};
document.getElementById(id).appendChild(div);
}
}
createScale("scale1");
createScale("scale2");

function getScale(id){
return document.getElementById(id).getAttribute("data-value")||"";
}

function buildReport(){
return `
LEARNER REFLECTIVE LOG

Instructor: Alex Heirani
Date: ${document.getElementById("date").innerText}
Name: ${name.value}

Lesson Goal:
${goal.value}

Initial Self Rating: ${getScale("scale1")}/10

What didn’t go well:
${improve.value}

What to do differently:
${different.value}

What went well:
${well.value}

Goal achieved today?
${achieved.value}

Final Self Rating: ${getScale("scale2")}/10

Additional Comments:
${comments.value}

Safety Incident: ${safety.value}
Incident Details:
${incident.value}

Instructor View – Goal Achieved:
${goalAchieved.value}

Notes:
${notes.value}

Instructor: Alex Heirani
`;
}

function generatePDF(){
const { jsPDF } = window.jspdf;
const doc = new jsPDF();
doc.setFontSize(12);
doc.text(doc.splitTextToSize(buildReport(),180),15,20);
doc.save("Learner_Reflective_Log.pdf");
}

function toggleDark(){
document.body.classList.toggle("dark");
}
</script>

</body>
</html>
